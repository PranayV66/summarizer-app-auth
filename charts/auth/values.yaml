replicaCount: 2

image:
  repository: ""
  tag: ""
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 5000

env:
  APP_SECRET_KEY: ""
  SQL_HOST: ""
  SQL_USER: ""
  SQL_PASSWORD: ""
  SQL_DB: ""
  APP_DOMAIN: ""

secrets:
  summarize-ai-auth:
    secretName: "auth-secrets"
    keys:
      sql_user: "SQL_USER"
      sql_password: "SQL_PASSWORD"
      sql_db: "SQL_DB"
      sql_host: "SQL_HOST"
      app_secret_key: "APP_SECRET_KEY"
      app_domain: "APP_DOMAIN"

  mysql:
    secretName: "mysql-secrets"
    keys:
      sql_user: "SQL_USER"
      sql_password: "SQL_PASSWORD"
      sql_db: "SQL_DB"

mysql:
  enabled: true
  replicaCount: 2
  auth:
    existingSecret: "mysql-secrets"
    rootPassword: "SQL_PASSWORD"
    username: "SQL_USER"
    password: "SQL_PASSWORD"
    database: "SQL_DB"

  primary:
    initdbScripts:
      init.sql: |
        CREATE DATABASE IF NOT EXISTS `users` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
        USE `users`;

        CREATE TABLE IF NOT EXISTS `accounts` (
            `user_id` INT NOT NULL AUTO_INCREMENT,
            `username` VARCHAR(100) NOT NULL,
            `password` VARCHAR(255) NOT NULL,
            `email` VARCHAR(100) NOT NULL,
            PRIMARY KEY (`user_id`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

  service:
    port: 3306

nodeSelector:
  ingress-zone: "1b"

resources:
  limits:
    cpu: "500m"
    memory: "512Mi"
  requests:
    cpu: "250m"
    memory: "256Mi"

networkPolicy:
  enabled: true
  allowFlaskToMysql:
    ingress:
      - from:
          - podSelector:
              matchLabels:
                app: summarize-ai-auth
        ports:
          - protocol: TCP
            port: 3306